<div class="sidebar-list">
  <div ng-show="indexPatternList.length > 1">
    <div class="index-pattern" ng-click="showIndexPatternSelection = !showIndexPatternSelection">
      <div css-truncate title="{{indexPattern.id}}">{{indexPattern.id}}</div>
      <i ng-hide="showIndexPatternSelection" class="mdi mdi-menu-down"></i>
      <i ng-show="showIndexPatternSelection" class="mdi mdi-menu-up"></i>
    </div>
    <div ng-show="showIndexPatternSelection">
      <ul class="list-unstyled sidebar-item index-pattern-selection">
        <li css-truncate class="sidebar-item-title" title="{{id}}" ng-repeat="id in indexPatternList | orderBy" ng-show="indexPattern.id != id" ng-click="setIndexPattern(id)">{{id}}</li>
      </ul>
      <div ng-click="showIndexPatternSelection = !showIndexPatternSelection" class="discover-field-details-close">
        <i class="mdi mdi-chevron-up"></i>
      </div>
    </div>
  </div>
  <div ng-hide="indexPatternList.length > 1">
    <div class="index-pattern">
      <div css-truncate>{{ indexPattern.id }}</div>
    </div>
  </div>

  <div class="sidebar-list-header">
    <h5>Selected Fields</h5>
  </div>
  <ul class="list-unstyled discover-selected-fields" >
    <discover-field ng-repeat="field in fields.raw|filter:{display:true}">
    </discover-field>
  </ul>

  <div class="sidebar-list-header sidebar-item" layout="row" layout-align="space-between center">
    <h5>Available Fields
      <i
        ng-class="{ 'mdi-chevron-right': !showFields, 'mdi-chevron-down': showFields }"
        ng-click="showFields = !showFields"
        aria-hidden="true"
        class="mdi visible-xs visible-sm pull-right field-collapse-toggle" ></i>
    </h5>

    <md-button class="md-icon-button"
        class="pull-right discover-field-filter-toggle"
        ng-click="showFilter = !showFilter"
        aria-label="Field Settings"
        aria-haspopup="true"
        aria-expanded="{{showFilter}}">
      <md-icon md-font-set="mdi" md-font-icon="mdi-settings"
               ng-class="{'md-accent': filter.active, 'hidden-xs': !showFields, 'hidden-sm': !showFields }"
               class="mdi-24px">
      </md-icon>

      <md-tooltip>
          <span translate>Field Settings</span>
      </md-tooltip>
    </md-button>
  </div>

  <div class="sidebar-item" ng-show="showFilter">
    <div ng-click="showFilter = !showFilter" class="discover-field-details-close">
        <i aria-hidden="true" class="mdi mdi-chevron-up"></i>
    </div>
    <form role="form" class="discover-field-details">
      <md-input-container class="md-block">
        <label>Analyzed</label>

        <md-select ng-model="filter.vals.analyzed">
          <md-option ng-repeat="opt in filter.boolOpts" ng-value="opt.value">
            {{opt.label}}
          </md-option>
        </md-select>
      </md-input-container>

      <md-input-container class="md-block">
        <label>Indexed</label>
        <md-select ng-model="filter.vals.indexed">
          <md-option ng-repeat="opt in filter.boolOpts" ng-value="opt.value">
            {{opt.label}}
          </md-option>
        </md-select>
      </md-input-container>

      <md-input-container class="md-block">
        <label>Type</label>
        <md-select ng-model="filter.vals.type">
          <md-option ng-repeat="field in fieldTypes" ng-value="field">
            {{field}}
          </md-option>
        </md-select>
      </md-input-container>

      <md-input-container class="md-block">
          <label>Field name</label>
          <input ng-model="filter.vals.name" class="form-control">
      </md-input-container>

      <div layout="row" class="md-body-1" layout-align="start center">
        <md-checkbox ng-model="filter.vals.missing"
                     class="md-primary" aria-label="Hide Missing Fields">
            Hide Missing Fields
        </md-checkbox>
      </div>

      <div layout="row" class="md-body-1" layout-align="center center">
        <md-button ng-click="filter.reset()" ng-disabled="!filter.active"
                   class="md-warn md-raised">
            <span>Reset Filters</span>
        </md-button>
      </div>
  </div>

  <ul
    ng-show="(popularFields | filter:filter.isFieldFiltered).length > 0"
    ng-class="{ 'hidden-sm': !showFields, 'hidden-xs': !showFields }"
    class="list-unstyled sidebar-well discover-popular-fields">
    <li class="sidebar-item sidebar-list-header">
      <h6>Popular</h6>
    </li>
    <discover-field
      ng-repeat="field in popularFields | filter:filter.isFieldFiltered">
    </discover-field>
  </ul>

  <ul
    ng-class="{ 'hidden-sm': !showFields, 'hidden-xs': !showFields  }"
    class="list-unstyled discover-unpopular-fields">
    <discover-field
      ng-repeat="field in unpopularFields | filter:filter.isFieldFiltered">
    </discover-field>
  </ul>

</div>
